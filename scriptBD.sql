
DROP TABLE USUARIO_ROLES CASCADE CONSTRAINTS;
DROP TABLE USUARIOS CASCADE CONSTRAINTS;
DROP TABLE DONACIONES CASCADE CONSTRAINTS;
DROP TABLE VENTAS CASCADE CONSTRAINTS;
DROP TABLE SEGUIMIENTOS CASCADE CONSTRAINTS;
DROP TABLE DESPACHOS CASCADE CONSTRAINTS;
DROP TABLE PROMOCIONES CASCADE CONSTRAINTS;
DROP TABLE ESPECIES CASCADE CONSTRAINTS;
DROP TABLE PRODUCTOS CASCADE CONSTRAINTS;
DROP TABLE BOLETAS CASCADE CONSTRAINTS;



--- SE ELIMINA NORMALIZACION TABLA USUARIO ROL, SE ENVIA FK A TABLA USUARIO DE ID_ROL

--CREACION TABLA USUARIO_ROLES

CREATE TABLE USUARIO_ROLES(
ID_ROL NUMBER(10) NOT NULL,
NOMBRE VARCHAR2(20) NOT NULL,
CONSTRAINT PK_USUARIO_ROLES PRIMARY KEY(ID_ROL)
);

--CREACION TABLA USUARIOS

CREATE TABLE USUARIOS(
ID_USUARIO NUMBER(10) NOT NULL,
RUT NUMBER(10),
DV VARCHAR2(1),
NOMBRE VARCHAR2(255),
AP_PATERNO VARCHAR2(255),
AP_MATERNO VARCHAR2(255),
ESTA_SUBSCRITO CHAR(1),
ID_ROL NUMBER(2),
CONSTRAINT PK_USUARIOS PRIMARY KEY (ID_USUARIO),
CONSTRAINT FK_USUARIOS FOREIGN KEY (ID_ROL) REFERENCES USUARIO_ROLES (ID_ROL) 
)


--CREACION TABLA SUSCRIPCION

CREATE TABLE SUSCRIPCION (
  ID_SUSCRIPTOR NUMBER(10) NOT NULL,
  FECHA_INICIO DATE,
  ESTADO_SUSCRIPCION BOOLEAN,
  FECHA_TERMINO DATE,
  ID_ROL NUMBER(2),
  CONSTRAINT PK_SUSCRIPCION PRIMARY KEY (ID_SUSCRIPTOR),
  CONSTRAINT FK_SUSCRIPCION_ROLES FOREIGN KEY (ID_ROL) REFERENCES USUARIO_ROLES (ID_ROL)
);


--CREACION TABLA DONACIONES

CREATE TABLE DONACIONES(
ID_DONACION NUMBER(10) NOT NULL,
FECHA DATE,
MONTO NUMBER(10),
ID_USUARIO NUMBER(10),
CONSTRAINT PK_DONACIONES PRIMARY KEY (ID_DONACION),
CONSTRAINT FK_DONACIONES FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO) 
)



--CREACION TABLA VENTAS

CREATE TABLE VENTAS(
ID_VENTA NUMBER(10) NOT NULL,
FECHA DATE,
ESTADO VARCHAR2(20),
HORA TIMESTAMP,
MONTO_TOTAL_VENTA NUMBER(10),
ID_USUARIO NUMBER(10),
CONSTRAINT PK_VENTAS PRIMARY KEY (ID_VENTA),
CONSTRAINT FK_VENTAS FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO) 
)




--CREACION TABLA SEGUIMIENTOS

CREATE TABLE SEGUIMIENTOS(
ID_SEGUIMIENTO NUMBER(10) NOT NULL,
NOMBRE VARCHAR2(25),
CONSTRAINT PK_SEGUIMIENTOS PRIMARY KEY (ID_SEGUIMIENTO)
)


--CREACION TABLA DESPACHOS

CREATE TABLE DESPACHOS(
ID_DESPACHO NUMBER(10) NOT NULL,
FECHA_DESPACHO DATE,
FECHA_ENTREGA DATE,
ID_SEGUIMIENTO NUMBER(10),
ID_VENTA NUMBER(10),
CONSTRAINT PK_DESPACHOS PRIMARY KEY (ID_DESPACHO),
CONSTRAINT FK_DESPACHOS FOREIGN KEY (ID_SEGUIMIENTO) REFERENCES SEGUIMIENTOS (ID_SEGUIMIENTO)
)



--CREACION TABLA PROMOCIONES

CREATE TABLE PROMOCION (
ID_PROMOCION NUMBER PRIMARY KEY,
FECHA_INICIO DATE,
FECHA_FIN DATE,
DESCUENTO NUMBER,
ESTADO BOOLEAN,
ID_PRODUCTO NUMBER,
CONSTRAINT FK_PROMOCION_PRODUCTOS FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO)
);

--CREACION TABLA ESPECIES

CREATE TABLE ESPECIES(
ID_ESPECIE NUMBER(10) NOT NULL,
NOMBRE VARCHAR2(255),
CONSTRAINT PK_ESPECIES PRIMARY KEY (ID_ESPECIE)
)


--CREACION TABLA PRODUCTOS

CREATE TABLE PRODUCTOS(
ID_PRODUCTO NUMBER(10) NOT NULL,
NOMBRE VARCHAR2(255),
VALOR NUMBER(10),
STOCK NUMBER(10),
ID_ESPECIE NUMBER(10),
ID_PROMOCION NUMBER(10),
IMAGEN IMAGE,
CONSTRAINT PK_PRODUCTOS PRIMARY KEY (ID_PRODUCTO),
CONSTRAINT FK_PRODUCTOS FOREIGN KEY (ID_ESPECIE) REFERENCES ESPECIES (ID_ESPECIE)
)



--CREACION TABLA PRODUCTOSVENTA

CREATE TABLE PRODUCTOSVENTA(
ID_PRODVENTA NUMBER(10) NOT NULL,
ID_PRODUCTO NUMBER(10),
ID_VENTA NUMBER(10),
VALOR_TOTALVENTA NUMBER(10),
CONSTRAINT PK_PRODUCTOSVENTA PRIMARY KEY (ID_PRODVENTA),
CONSTRAINT FK_PRODUCTOSVENTA FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO)
)


------SELECT * FROM DESPACHOS;

ALTER TABLE DESPACHOS 
	 ADD CONSTRAINT FK_DESPACHOS2 FOREIGN KEY (ID_VENTA)
	  REFERENCES VENTAS (ID_VENTA);





ALTER TABLE PRODUCTOS 
	 ADD CONSTRAINT FK_PRODUCTOS2 FOREIGN KEY (ID_PROMOCION)
	  REFERENCES PROMOCIONES (ID_PROMOCION);




ALTER TABLE PRODUCTOSVENTA
	 ADD CONSTRAINT FK_PRODUCTOSVENTA2 FOREIGN KEY (ID_VENTA)
	  REFERENCES VENTAS (ID_VENTA);



--POBLAR TABLA USUARIO_ROLES

INSERT INTO USUARIO_ROLES VALUES (1,'ADMIN');
INSERT INTO USUARIO_ROLES VALUES (2,'CLIENTE');

--POBLAR TABLA USUARIOS

INSERT INTO USUARIOS VALUES (1, 15236965, '5', 'MONTSERRAT', 'ALCARAZ', 'NOVOA', 'Y', 2);
INSERT INTO USUARIOS VALUES (2, 20238987, 'K', 'ELENA', 'TORRES', 'ROJAS', 'N', 2);
INSERT INTO USUARIOS VALUES (3, 19292389, '1', 'MARÍA', 'ZAMORA', 'MOLINA', 'Y', 2);
INSERT INTO USUARIOS VALUES (4, 20564596, '3', 'THOMAS', 'GALLO', 'ROCA', 'N', 2);



--POBLAR TABLA DONACIONES

INSERT INTO DONACIONES VALUES (1, TO_DATE('2020/04/24', 'YYYY/MM/DD'), '5000', 1);
INSERT INTO DONACIONES VALUES (2, TO_DATE('2021/08/20', 'YYYY/MM/DD'), '12000', 2);
INSERT INTO DONACIONES VALUES (3, TO_DATE('2021/02/01', 'YYYY/MM/DD'), '600', 3);
INSERT INTO DONACIONES VALUES (4, TO_DATE('2022/12/27', 'YYYY/MM/DD'), '1000', 1);
INSERT INTO DONACIONES VALUES (5, TO_DATE('2022/02/12', 'YYYY/MM/DD'), '12000', 1);
INSERT INTO DONACIONES VALUES (6, TO_DATE('2022/02/11', 'YYYY/MM/DD'), '8000', 2);
INSERT INTO DONACIONES VALUES (7, TO_DATE('2023/01/06', 'YYYY/MM/DD'), '2000', 2);



--POBLAR TABLA VENTAS


INSERT INTO VENTAS VALUES (1, TO_DATE('2020/04/24', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('10:30:00', 'HH24:MI:SS'), 1);
INSERT INTO VENTAS VALUES (2, TO_DATE('2020/04/25', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('22:30:00', 'HH24:MI:SS'), 1);
INSERT INTO VENTAS VALUES (3, TO_DATE('2020/04/26', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('20:30:00', 'HH24:MI:SS'), 1);
INSERT INTO VENTAS VALUES (4, TO_DATE('2020/04/27', 'YYYY/MM/DD'),'CANCELADA', TO_TIMESTAMP('09:30:00', 'HH24:MI:SS'), 2);
INSERT INTO VENTAS VALUES (5, TO_DATE('2020/04/28', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('10:10:00', 'HH24:MI:SS'), 3);
INSERT INTO VENTAS VALUES (6, TO_DATE('2020/04/29', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('10:30:00', 'HH24:MI:SS'), 2);
INSERT INTO VENTAS VALUES (7, TO_DATE('2020/04/30', 'YYYY/MM/DD'),'CANCELADA', TO_TIMESTAMP('10:30:00', 'HH24:MI:SS'), 4);
INSERT INTO VENTAS VALUES (8, TO_DATE('2020/05/04', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('10:15:00', 'HH24:MI:SS'), 3);
INSERT INTO VENTAS VALUES (9, TO_DATE('2020/05/14', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('10:18:00', 'HH24:MI:SS'), 2);
INSERT INTO VENTAS VALUES (10, TO_DATE('2020/05/24', 'YYYY/MM/DD'),'COMPLETADA', TO_TIMESTAMP('06:30:00', 'HH24:MI:SS'), 3);





--POBLAR TABLA SEGUIMIENTOS


INSERT INTO SEGUIMIENTOS VALUES (1, 'PENDIENTE DE RECOJO');
----Pendiente de recojo: el paquete aún no ha sido recogido por el servicio de mensajería.
INSERT INTO SEGUIMIENTOS VALUES (2, 'EN TRANSITO');
----En tránsito: el paquete ha sido recogido y se encuentra en camino a su destino.
INSERT INTO SEGUIMIENTOS VALUES (3, 'EN PROCESO DE CALIFICACION');
--En proceso de clasificación: el paquete ha llegado a una instalación de clasificación para ser ordenado y dirigido hacia su destino.
INSERT INTO SEGUIMIENTOS VALUES (4, 'EN PROCESO DE ENTREGA');
----En proceso de entrega: el paquete se encuentra en manos del repartidor y está en camino a su destino final.
INSERT INTO SEGUIMIENTOS VALUES (5, 'ENTREGADO');
----Entregado: el paquete ha sido entregado con éxito en su destino y se ha registrado la recepción del mismo.

--POBLAR TABLA DESPACHOS

INSERT INTO DESPACHOS VALUES (1, TO_DATE('2020/05/16', 'YYYY/MM/DD'), TO_DATE('2020/05/26', 'YYYY/MM/DD'),'1', 1);
INSERT INTO DESPACHOS VALUES (2, TO_DATE('2020/06/01', 'YYYY/MM/DD'), TO_DATE('2020/06/16', 'YYYY/MM/DD'),'2', 2);
INSERT INTO DESPACHOS VALUES (3, TO_DATE('2020/06/11', 'YYYY/MM/DD'), TO_DATE('2020/06/26', 'YYYY/MM/DD'),'1', 3);
INSERT INTO DESPACHOS VALUES (4, TO_DATE('2020/08/16', 'YYYY/MM/DD'), TO_DATE('2020/08/28', 'YYYY/MM/DD'),'1', 4);
INSERT INTO DESPACHOS VALUES (5, TO_DATE('2020/12/11', 'YYYY/MM/DD'), TO_DATE('2020/12/24', 'YYYY/MM/DD'),'2', 5);
INSERT INTO DESPACHOS VALUES (6, TO_DATE('2021/01/03', 'YYYY/MM/DD'), TO_DATE('2021/01/16', 'YYYY/MM/DD'),'1', 6);
INSERT INTO DESPACHOS VALUES (7, TO_DATE('2021/02/06', 'YYYY/MM/DD'), TO_DATE('2021/02/14', 'YYYY/MM/DD'),'1', 7);





--POBLAR TABLA PROMOCIONES

INSERT INTO PROMOCION VALUES (1, '2023-06-01', '2023-06-30', 10, true, 1);
INSERT INTO PROMOCION VALUES (2, '2023-07-01', '2023-07-31', 20, true, 2);
INSERT INTO PROMOCION VALUES (3, '2023-08-01', '2023-08-31', 15, true, 3);





--POBLAR TABLA ESPECIES

INSERT INTO ESPECIES VALUES (1, 'GATO');
INSERT INTO ESPECIES VALUES (2, 'PERRO');



--POBLAR TABLA PRODUCTOS

INSERT INTO PRODUCTOS VALUES (1, 'Proplan Adulto Razas Medianas (Ex Complete) alimento para perro', 26990, 10, 2, 3, /image1.jpg);
INSERT INTO PRODUCTOS VALUES (2, 'Nath Puppy Mini sabor pollo y arroz café alimento para perros', 4990, 10, 2, 3, /image2.jpg);
INSERT INTO PRODUCTOS VALUES (3, 'Desparasitante Bravecto para perros 20 KG a 40 KG', 40515, 10, 2, 3, /image3.jpg);
INSERT INTO PRODUCTOS VALUES (4, 'Tearless shampoo cachorro - le salon 375 ML', 8690, 10, 2, 3, /image4.jpg);
INSERT INTO PRODUCTOS VALUES (5, 'Royal Canin adulto Mini Adult alimento para perro', 51905, 10, 2, 3, /image5.jpg);






--POBLAR TABLA PRODUCTOSVENTA 

INSERT INTO PRODUCTOSVENTA VALUES (1, 2, 1, 26990);
INSERT INTO PRODUCTOSVENTA VALUES (2, 3, 2, 40515);
INSERT INTO PRODUCTOSVENTA VALUES (3, 3, 3, 40515);
INSERT INTO PRODUCTOSVENTA VALUES (4, 4, 4, 8690);
INSERT INTO PRODUCTOSVENTA VALUES (5, 5, 5, 51905);




















